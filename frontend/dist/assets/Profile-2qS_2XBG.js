import{a8 as f,a7 as S,a5 as b,an as E,a6 as C,a9 as D,c as i,a as t,i as v,N as e,ac as a,ab as J,F as k,j as w,o as n,ae as Q}from"./index-QOySC_5N.js";import{g as U,a as F}from"./articles-aP_knVEN.js";const N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA1CAYAAADh5qNwAAAABHNCSVQICAgIfAhkiAAAAgxJREFUaEPtmu1RwkAURe86FmAJdCAlYAd0IB1oB1ICHaAVKBWgFaAVaAdoBdd5zIsTnvnYYLI8nD1//AMze7g3m5i3wD8keHcieQHgGsAYwEjX+wZgA2AVQvj07vCDyJC8I7llPe/ymZOQIjkidwuOZaOJ+uQAoYK1S6MGIUltTnJKckLyvibJuSuxBiERkM1iD/281K6MXH+/PnsUmoSaFqSbid1IZk3fScKhQgVayzLLJAuv469Cgl5nZY63YfQhpFKycexJndX9ikMiQgDkFy2eEAoeQghdrwl50ijzNeTaK+kroYKKrV0eqdIxgNDSVE+w6Q9HIqHFcAaGRELy1JHmxptQKE3tslALZOWmIJXLCR1ErlwLuXJ9kyvXQq5c3+TKtZAr1ze5ci3kyvVNrlwLuXJ9kyvXwtErJ5BcVLxLa5w+1OFCSKXWRurkhWR4bOn8YsNNQpqSjB/LyFi/E66EVEpGkWU6vcZ1J6RSdsw/iY3Jq9DYpMSTFtKUZkYqaszoMqECko9G6rYpKZ2MV82H0r0KbqPiDNDe2FElZL4qN2d7fqHAlZAdBr9rJeU6uyF3N2R7XsHiRuhcE5yaJOUmvAUQO8T6AHAVQpC/R6eQurRSkSt7BvACYOHp3F3QkaKkEoMksQLwCuDJk0gZSaopFTn1uBPQU5Au6hWF+XdDNgU5hhb9NOGNbzPbR48SpOYFAAAAAElFTkSuQmCC";function K(){const A=f(null),o=f([]),u=f(!1),c=f(null),p=S(()=>A.value?.join_date?new Date(A.value.join_date).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}):"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),_=async()=>{try{u.value=!0,c.value=null,A.value=await F()}catch(d){c.value="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏",console.error("Error fetching user stats:",d)}finally{u.value=!1}},m=async(d=0,g=100)=>{try{u.value=!0,c.value=null,o.value=await U(d,g)}catch(l){c.value="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–µ–π",console.error("Error fetching user articles:",l)}finally{u.value=!1}};return{userStats:A,userArticles:o,loading:u,error:c,formattedJoinDate:p,fetchUserStats:_,fetchUserArticles:m,refreshProfile:async()=>{await Promise.all([_(),m()])}}}const L={class:"profile-container"},R={class:"profile-header"},B={class:"user-info"},V={class:"user-nickname"},Y={class:"user-tag"},I={key:0,class:"user-stats"},H={class:"stat-item"},P={class:"stat-item"},Z={class:"stat-item"},q={class:"stat-item"},O={key:1,class:"user-stats"},M={key:0,class:"action-buttons"},X={class:"edit-button"},j={class:"edit-text"},x={class:"profile-content"},T={key:0,class:"empty-state"},z={class:"empty-message"},G={key:1,class:"loading-state"},$={key:2,class:"error-state"},W={class:"error-message"},tt={key:3,class:"empty-state"},st={class:"empty-message"},et={key:4,class:"articles-grid"},at={class:"article-title"},ot={class:"article-content"},it={class:"article-meta"},nt={class:"article-date"},rt={class:"article-stats"},lt={class:"likes"},ct={class:"dislikes"},dt={class:"comments"},ut={key:0,class:"article-tags"},At=b({__name:"Profile",setup(A){const o=E(),{t:u}=C(),{userStats:c,userArticles:p,loading:_,error:m,formattedJoinDate:h,refreshProfile:d}=K(),g=l=>new Date(l).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"});return D(async()=>{if(!o.user&&o.token)try{await o.fetchMe()}catch{}o.isAuthenticated&&await d()}),(l,s)=>(n(),i("div",L,[t("div",R,[s[7]||(s[7]=t("div",{class:"profile-avatar"},null,-1)),t("div",B,[t("h1",V,e(a(o).user?.username||"–ì–æ—Å—Ç—å"),1),t("p",Y,e(a(o).user?"#"+a(o).user.id:"#0000"),1),a(o).isAuthenticated&&a(c)?(n(),i("div",I,[t("span",H,e(a(c).articles_count)+" "+e(l.$t("profile_page.title1")),1),s[1]||(s[1]=t("div",{class:"stat-divider"},null,-1)),t("span",P,e(a(c).comments_count)+" "+e(l.$t("profile_page.title2")),1),s[2]||(s[2]=t("div",{class:"stat-divider"},null,-1)),t("span",Z,e(l.$t("profile_page.title3"))+" "+e(a(h)),1),s[3]||(s[3]=t("div",{class:"stat-divider"},null,-1)),t("span",q,e(l.$t("profile_page.title4")),1)])):a(o).isAuthenticated&&a(_)?(n(),i("div",O,[...s[4]||(s[4]=[t("span",{class:"stat-item"},"–ó–∞–≥—Ä—É–∑–∫–∞...",-1)])])):v("",!0)]),a(o).isAuthenticated?(n(),i("div",M,[t("button",X,[s[5]||(s[5]=t("img",{src:N,alt:"Edit",class:"edit-icon",width:"30",height:"30"},null,-1)),t("span",j,e(l.$t("profile_page.button1")),1)]),s[6]||(s[6]=J('<button class="more-button" data-v-4fd55cb6><svg class="more-icon" width="6" height="30" viewBox="0 0 6 30" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-4fd55cb6><circle cx="3" cy="6" r="2" fill="currentColor" data-v-4fd55cb6></circle><circle cx="3" cy="15" r="2" fill="currentColor" data-v-4fd55cb6></circle><circle cx="3" cy="24" r="2" fill="currentColor" data-v-4fd55cb6></circle></svg></button>',1))])):v("",!0)]),s[9]||(s[9]=t("div",{class:"profile-divider"},null,-1)),t("div",x,[a(o).isAuthenticated?a(_)?(n(),i("div",G,[...s[8]||(s[8]=[t("p",{class:"loading-message"},"–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–µ–π...",-1)])])):a(m)?(n(),i("div",$,[t("p",W,e(a(m)),1),t("button",{onClick:s[0]||(s[0]=(...r)=>a(d)&&a(d)(...r)),class:"retry-button"},"–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞")])):a(p).length===0?(n(),i("div",tt,[t("p",st,e(l.$t("common.no_articles")),1)])):(n(),i("div",et,[(n(!0),i(k,null,w(a(p),r=>(n(),i("div",{key:r.id,class:"article-card"},[t("h3",at,e(r.title),1),t("p",ot,e(r.content.substring(0,200))+e(r.content.length>200?"...":""),1),t("div",it,[t("span",nt,e(g(r.created_at)),1),t("div",rt,[t("span",lt,e(r.likes)+" üëç",1),t("span",ct,e(r.dislikes)+" üëé",1),t("span",dt,e(r.comments_count)+" üí¨",1)])]),r.tags&&r.tags.length>0?(n(),i("div",ut,[(n(!0),i(k,null,w(r.tags,y=>(n(),i("span",{key:y,class:"tag"},e(y),1))),128))])):v("",!0)]))),128))])):(n(),i("div",T,[t("p",z,e(l.$t("common.not_registered")),1)]))])]))}}),pt=Q(At,[["__scopeId","data-v-4fd55cb6"]]);export{pt as default};
