import{a5 as oe,a8 as c,ag as L,a9 as ne,aa as se,a7 as ie,c as a,o as s,F as S,a as e,i as H,_ as r,N as v,k as ae,Q as l,U as re,V as le,ab as ce,j as I,O as de,ac as ue,a2 as pe,Z as ve,ai as ke,ae as he}from"./index-QOySC_5N.js";import{s as me}from"./index-D4WfF60I.js";import{u as we}from"./useArticles-NJw4-Fx8.js";const ge={class:"article-card"},Ce={class:"article-card-header"},fe=["src","alt"],ye={key:1,class:"avatar-placeholder"},be={class:"nickname"},_e={class:"publication-time"},xe={class:"more-options-wrapper"},Me={class:"article-card-content"},Re={class:"article-card-content-title"},Ae={class:"metadata-panel"},Le={class:"metadata-text"},Se={class:"tags-container"},De={class:"article-card-preview"},je=["src","alt"],Be={key:1,class:"preview-fallback"},Te={key:2,class:"preview-content"},Ee=["data-text"],He={class:"article-card-footer"},Ie={class:"article-actions"},ze={class:"action-group"},Ue=["fill"],Ve={class:"action-count"},Ne=["fill"],Pe={class:"action-count"},Oe=["fill"],$e={class:"action-count"},Ge=["fill"],Ze=["fill"],Fe=["fill"],Qe=["fill"],We={class:"report-panel-content"},qe={class:"report-reasons"},Je=["value"],Ke={class:"reason-title"},Xe={class:"report-panel-buttons"},Ye=["disabled"],et=oe({__name:"ArticleCard",props:{article:{}},emits:["tagClick","authorClick","articleClick"],setup(z,{emit:U}){const i=z,_=U,{react:D}=we(),k=c(i.article.userReaction==="like"),h=c(i.article.userReaction==="dislike"),w=c(i.article.likes||0),g=c(i.article.dislikes||0),x=c(!1),M=c(!1),C=c(!1),V=c(i.article.commentsCount||0),R=c(!1),u=c(!1),f=c(!1),p=c([]);L(()=>i.article.userReaction,t=>{k.value=t==="like",h.value=t==="dislike"}),L(()=>i.article.likes,t=>{w.value=t??w.value}),L(()=>i.article.dislikes,t=>{g.value=t??g.value});const N=async()=>{try{const t=await D(i.article.id,"like");w.value=t.likes??0,g.value=t.dislikes??0,k.value=t.userReaction==="like",h.value=t.userReaction==="dislike"}catch(t){console.error("Ошибка лайка:",t)}},P=async()=>{try{const t=await D(i.article.id,"dislike");w.value=t.likes??0,g.value=t.dislikes??0,k.value=t.userReaction==="like",h.value=t.userReaction==="dislike"}catch(t){console.error("Ошибка дизлайка:",t)}},b=["success","info","warning","danger","secondary"],y={success:["JavaScript","Vue.js","React","Node.js","Web Development","Frontend","Tutorial","Guide"],info:["Python","TypeScript","Angular","Programming","Backend","Database","SQL","API","REST"],warning:["Design","UI/UX","Mobile Development","Game Development","Unity","Unreal Engine","Review","Interview"],danger:["Security","Testing","Cryptography","DevOps","Docker","Kubernetes","Blockchain"],secondary:["Tools","Git","NoSQL","Fullstack","Artificial Intelligence","Machine Learning","GraphQL","Microservices","Cloud","AWS","Azure","Google Cloud","Linux","Windows","macOS","News","Case Study","Architecture","Algorithms","Design Patterns"]},O=t=>{if(typeof t=="number")return b[t%b.length];const o=t;if(y.success.includes(o))return"success";if(y.info.includes(o))return"info";if(y.warning.includes(o))return"warning";if(y.danger.includes(o))return"danger";if(y.secondary.includes(o))return"secondary";let n=0;for(let d=0;d<o.length;d++)n=o.charCodeAt(d)+((n<<5)-n);const m=Math.abs(n)%b.length;return b[m]},$=()=>{},G=t=>{_("tagClick",t)},Z=()=>{},F=()=>{_("articleClick",i.article.id)},j=()=>{_("authorClick",i.article.author.id)},Q=()=>{},W=t=>{const o=typeof t=="string"?new Date(t):t,m=new Date().getTime()-o.getTime(),d=Math.floor(m/(1e3*60*60*24));return d===0?"Today":d===1?"Yesterday":d<7?`${d} days ago`:d<30?`${Math.floor(d/7)} weeks ago`:o.toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})};function q(){R.value=!0}const J=()=>{u.value=!u.value},K=async()=>{try{const t=`${window.location.origin}/article/${i.article.id}`;await navigator.clipboard.writeText(t)}catch(t){console.error("Не удалось скопировать ссылку:",t)}finally{u.value=!1}};function A(){u.value=!1,f.value=!0,p.value=[],console.log("[ArticleCard] open report panel")}const B=t=>{!t.target.closest(".more-options-wrapper")&&u.value&&(u.value=!1)};ne(()=>{document.addEventListener("click",B);const t=o=>{o.target.closest(".options-dropdown .dropdown-item.danger")&&(o.stopPropagation(),u.value=!1,f.value=!0,p.value=[],console.log("[ArticleCard] delegated open report panel"))};window.__articleCardDelegatedReportHandler__=t,document.addEventListener("click",t,!0)}),se(()=>{document.removeEventListener("click",B);const t=window.__articleCardDelegatedReportHandler__;t&&(document.removeEventListener("click",t,!0),window.__articleCardDelegatedReportHandler__=void 0)});const X=[{id:"spam",title:"Spam",description:"Unwanted commercial content or repetitive messages"},{id:"harassment",title:"Harassment",description:"Bullying, threats, or personal attacks"},{id:"hate",title:"Hate Speech",description:"Content promoting violence or hatred"},{id:"inappropriate",title:"Inappropriate Content",description:"Sexual, violent, or disturbing content"},{id:"misinformation",title:"Misinformation",description:"False or misleading information"}],T=()=>{f.value=!1,p.value=[]},Y=()=>{console.log("Report article:",i.article.id,"Reasons:",p.value),f.value=!1,p.value=[]},ee=t=>{const o=document.createElement("textarea");return o.innerHTML=t,o.value},E=ie(()=>{const t=i.article.excerpt||i.article.content;return t?ee(t):""}),te=t=>{switch(t){case"easy":return"Easy";case"medium":return"Medium";case"hard":return"Hard";default:return"Medium"}};return(t,o)=>(s(),a(S,null,[e("div",ge,[e("div",Ce,[e("div",{class:"logo",onClick:r(j,["stop"])},[t.article.author.avatar?(s(),a("img",{key:0,src:t.article.author.avatar,alt:t.article.author.username,class:"avatar-image"},null,8,fe)):(s(),a("div",ye,[...o[3]||(o[3]=[e("svg",{class:"question-icon",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.29152 14.92 10C14.92 12 11.92 13 11.92 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M12 17H12.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]))]),e("div",{class:"nickname-container",onClick:r(j,["stop"])},[e("h2",be,v(t.article.author.username),1),e("h2",_e,v(W(t.article.createdAt)),1)]),e("div",xe,[(s(),a("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:l(["more-options-icon",{active:u.value}]),onClick:r(J,["stop"])},[...o[4]||(o[4]=[e("path",{d:"M24 26C25.1046 26 26 25.1046 26 24C26 22.8954 25.1046 22 24 22C22.8954 22 22 22.8954 22 24C22 25.1046 22.8954 26 24 26Z",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M24 12C25.1046 12 26 11.1046 26 10C26 8.89543 25.1046 8 24 8C22.8954 8 22 8.89543 22 10C22 11.1046 22.8954 12 24 12Z",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M24 40C25.1046 40 26 39.1046 26 38C26 36.8954 25.1046 36 24 36C22.8954 36 22 36.8954 22 38C22 39.1046 22.8954 40 24 40Z",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2)),ae(le,{name:"dropdown-fade"},{default:re(()=>[u.value?(s(),a("div",{key:0,class:"options-dropdown",onClick:o[0]||(o[0]=r(()=>{},["stop"]))},[e("button",{class:"dropdown-item",onClick:K},[...o[5]||(o[5]=[e("svg",{width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 13a5 5 0 0 1 7.07 0l1.41 1.41a5 5 0 0 1 0 7.07v0a5 5 0 0 1-7.07 0l-1.41-1.41",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M14 11a5 5 0 0 1-7.07 0L5.5 9.57a5 5 0 0 1 0-7.07v0a5 5 0 0 1 7.07 0L14 3.91",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("span",null,"Copy link",-1)])]),e("button",{class:"dropdown-item danger",onMousedown:r(A,["stop","prevent"]),onPointerdown:r(A,["stop"]),onClick:r(A,["stop"])},[...o[6]||(o[6]=[e("svg",{width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10.29 3.86L1.82 18c-.175.302-.267.645-.268.994-.001.35.089.693.262.997.173.303.423.556.724.733.3.177.642.272.991.276H20.47c.349-.004.691-.099.992-.276.301-.177.55-.43.723-.733.173-.304.263-.647.262-.997-.001-.349-.093-.692-.268-.994L13.71 3.86A2.5 2.5 0 0 0 12 2.897a2.5 2.5 0 0 0-1.71.963Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M12 9v4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M12 17h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("span",null,"Report",-1)])],32)])):H("",!0)]),_:1})])]),e("div",Me,[e("h2",Re,v(t.article.title),1),e("div",Ae,[e("div",{class:l(["metadata-item difficulty",`difficulty-${t.article.difficulty||"medium"}`])},[o[7]||(o[7]=e("svg",{class:"metadata-icon",width:"16",height:"16",viewBox:"0 0 512 512",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:`M2230 5098 c-58 -40 -70 -65 -86 -189 -46 -351 -187 -668 -418 -931
                    -90 -104 -165 -169 -352 -308 -498 -373 -786 -889 -835 -1498 -40 -491 129
                    -1027 448 -1422 86 -106 251 -264 363 -347 409 -302 905 -441 1401 -393 535
                    52 1019 309 1367 725 333 398 504 928 463 1433 -38 476 -207 872 -523 1224
                    -97 107 -127 128 -189 128 -70 0 -102 -28 -179 -156 -63 -106 -176 -259 -217
                    -296 -19 -17 -19 -16 -10 60 13 111 2 368 -22 502 -72 411 -254 775 -536 1068
                    -124 129 -212 204 -341 290 -197 131 -268 155 -334 110z m321 -474 c251 -209
                    445 -504 543 -826 56 -186 70 -288 70 -498 0 -209 -13 -298 -71 -493 -48 -161
                    -51 -193 -21 -236 60 -88 138 -100 235 -36 186 122 386 311 513 482 58 79 78
                    99 88 91 25 -22 154 -222 196 -307 242 -483 243 -1058 3 -1538 -141 -280 -336
                    -501 -595 -674 -373 -250 -846 -343 -1284 -255 -622 126 -1113 562 -1308 1162
                    -180 553 -76 1138 285 1599 91 116 231 247 391 366 151 112 311 261 407 379
                    171 212 322 504 382 740 9 36 21 82 26 103 l10 39 27 -18 c15 -9 61 -45 103
                    -80z`})],-1)),e("span",Le,v(te(t.article.difficulty)),1)],2),o[8]||(o[8]=ce('<div class="metadata-item time" data-v-6a6db62d><i class="pi pi-clock metadata-icon" data-v-6a6db62d></i><span class="metadata-text" data-v-6a6db62d>22 min</span></div><div class="metadata-item views" data-v-6a6db62d><i class="pi pi-eye metadata-icon" data-v-6a6db62d></i><span class="metadata-text" data-v-6a6db62d>3</span></div>',2))]),e("div",Se,[(s(!0),a(S,null,I(t.article.tags,n=>(s(),de(ue(me),{key:n,value:n,severity:O(n),class:"custom-tag",onClick:r(m=>G(n),["stop"])},null,8,["value","severity","onClick"]))),128))]),e("div",De,[t.article.previewImage&&!R.value?(s(),a("div",{key:0,class:"preview-image",style:pe({"--preview-bg":`url(${t.article.previewImage})`})},[e("img",{src:t.article.previewImage,alt:t.article.title,class:"preview-img",onError:q},null,40,je)],4)):R.value?(s(),a("div",Be,[...o[9]||(o[9]=[e("span",{class:"preview-fallback-text"}," Изображение было удалено из-за плохого содержания ",-1)])])):(s(),a("div",Te,[...o[10]||(o[10]=[e("div",{class:"preview-placeholder"},[e("i",{class:"pi pi-image preview-icon"}),e("span",{class:"preview-text"},"Превью статьи")],-1)])]))]),e("div",{class:"article-card-content-text","data-text":E.value},v(E.value),9,Ee)]),e("div",He,[e("div",Ie,[e("div",ze,[e("button",{class:l(["action-btn like-btn",{active:k.value}]),onClick:r(N,["stop"])},[(s(),a("svg",{class:l(["heart-icon",{filled:k.value}]),width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:k.value?"currentColor":"none"},null,8,Ue)],2)),e("span",Ve,v(w.value),1)],2),e("button",{class:l(["action-btn dislike-btn",{active:h.value}]),onClick:r(P,["stop"])},[(s(),a("svg",{class:l(["dislike-icon",{filled:h.value}]),width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:h.value?"currentColor":"none"},null,8,Ne)],2)),e("span",Pe,v(g.value),1)],2),e("button",{class:l(["action-btn comment-btn",{active:M.value}]),onClick:r(Z,["stop"])},[(s(),a("svg",{class:l(["comment-icon",{filled:M.value}]),width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:M.value?"currentColor":"none"},null,8,Oe)],2)),e("span",$e,v(V.value),1)],2),e("button",{class:l(["action-btn bookmark-btn",{active:x.value}]),onClick:r(Q,["stop"])},[(s(),a("svg",{class:l(["bookmark-icon",{filled:x.value}]),width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:x.value?"currentColor":"none"},null,8,Ge)],2))],2),e("button",{class:l(["action-btn share-btn",{active:C.value}]),onClick:r($,["stop"])},[(s(),a("svg",{class:l(["share-icon",{filled:C.value}]),width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"18",cy:"5",r:"3",stroke:"currentColor","stroke-width":"2",fill:C.value?"currentColor":"none"},null,8,Ze),e("circle",{cx:"6",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2",fill:C.value?"currentColor":"none"},null,8,Fe),e("circle",{cx:"18",cy:"19",r:"3",stroke:"currentColor","stroke-width":"2",fill:C.value?"currentColor":"none"},null,8,Qe),o[11]||(o[11]=e("path",{d:"m8.59 13.51 6.83 3.98",stroke:"currentColor","stroke-width":"2"},null,-1)),o[12]||(o[12]=e("path",{d:"m15.41 6.51-6.82 3.98",stroke:"currentColor","stroke-width":"2"},null,-1))],2))],2)])]),e("button",{class:"read-more-btn",onClick:r(F,["stop"])}," Читать далее ")])]),f.value?(s(),a("div",{key:0,class:"report-panel-overlay",onClick:T},[e("div",{class:"report-panel",onClick:o[2]||(o[2]=r(()=>{},["stop"]))},[e("div",We,[o[14]||(o[14]=e("h3",{class:"report-panel-title"},"Report Article",-1)),o[15]||(o[15]=e("p",{class:"report-panel-subtitle"},"Select the reason for reporting:",-1)),e("div",qe,[(s(),a(S,null,I(X,n=>e("label",{key:n.id,class:l(["reason-item",{selected:p.value.includes(n.id)}])},[ve(e("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":o[1]||(o[1]=m=>p.value=m),class:"reason-checkbox"},null,8,Je),[[ke,p.value]]),o[13]||(o[13]=e("span",{class:"reason-checkmark"},null,-1)),e("span",Ke,v(n.title),1)],2)),64))]),e("div",Xe,[e("button",{class:"report-panel-button cancel",onClick:T},"Cancel"),e("button",{class:"report-panel-button confirm",onClick:Y,disabled:p.value.length===0}," Submit Report ",8,Ye)])])])])):H("",!0)],64))}}),st=he(et,[["__scopeId","data-v-6a6db62d"]]);export{st as A};
